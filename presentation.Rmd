---
title: "Forest proximate people... in Caatinga"
subtitle: 
author: "Lucas Alenar"
institute: "UFPE"
date: "12/11/2021 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
---
```{r, include=FALSE} 
#library
library(raster)
library(geobr)
library(dplyr)
library(here)
library(sf)
library(ggplot2)
load(here(".RData"))
```

class: inverse
#data

- [World Pop](https://www.worldpop.org/): Constrained data
  - People per pixel
  - ~3arc seconds (aprox. 100m at equator)
  - data from 2020
- [LandScan](https://landscan.ornl.gov/)
  - People per pixel
  - 1km at equator
  - data from 2010, 2015, 2019
- [IBGE Grade Estatística](https://geoftp.ibge.gov.br/recortes_para_fins_estatisticos/grade_estatistica/censo_2010/grade_estatistica.pdf)
  - People per "pixel"
  - 1km x 1km
  - data from 2010 census
--

- [Forested Plots](https://www.science.org/doi/10.1126/science.aam6527)
  - Each plot classified as forest (>20% of tree cover) and non-forest
  - 6,200 plots in Caatinga, but 1,606 forested

--

- Caatinga shape
  - From Geobr
  - 2019 delimitation

---
class: inverse, center
## 10km buffer with union functions
```{r, echo=F, fig.height=8, fig.width=9}
plot(caat_shp_polybr$geom)
plot(buff_10km_union, add = T)
```

---
class: inverse, center
## Zoom in the NE of Caatinga
```{r echo=F, fig.height=8, fig.width=9, message=FALSE, warning=FALSE}
ggplot() +
  geom_raster(data = pop_caat_tibble, aes(x=x, y=y, fill=pop_caat_polybr_1000))+
  geom_sf(data = caat_shp_polybr, fill= NA, colour = "black", size = .3) +
  geom_sf(data = plot_caat_polybr, size =0.1) +
  geom_sf(data=st_as_sf(buff_1km_union), fill = NA, col = "red") +
  geom_sf(data=st_as_sf(buff_5km_union), fill = NA, col = "red") +
  geom_sf(data=st_as_sf(buff_10km_union), fill = NA, col = "red") +
  coord_cartesian(xlim = c(6500000,7000000), ylim = c(9000000,9500000))+
  coord_sf(xlim = c(6800000,7000000), ylim = c(9000000,9200000))+
  scale_fill_viridis_c(name = "Population in Caatinga") +
  theme(panel.background = element_blank(),
        axis.title = element_blank()
  )
```

---
class: center
```{r echo=FALSE}

kableExtra::kable(df_results)
```

---
class:inverse
background-image: url(img/grid_bastin.jpg)
background-size: contain
background-position: 50% 50%

# **Bastin et al Samples of forest cover in drylands**

---
class:inverse
background-image: url(img/grid_bastin_sanharo.jpg)
background-size: contain
background-position: 50% 50%

# **Closer look at Sanharó**

---
class: inverse, center

# frequency of forested plots by mapbiomas land cover
```{r echo=FALSE}
freq_forest_landuse
```

---
# % of native vegetation (Mapbiomas) inside each buffer

.pull-left[

- Lack RAM for 30m resolution analysis
```{r echo = FALSE, warning=FALSE}
raster(x="D:/lucas_alencar/downloads/caat_nvc.tif")-> caat_nvc
plot(caat_nvc)
```

]

.pull-rigth[

- Aggregate forest cover to 240m resolution
```{r echo = FALSE, warning=FALSE, fig.}
raster(x="D:/lucas_alencar/downloads/caat_nvc_240.tif")-> caat_nvc_240m
plot(caat_nvc_240m)
```

]

---
# Comparing bastin and mapbiomas dataset...
- 1km buffer -> 0,6% Caatinga nvc by mapbiomas
- 5km buffer -> 15%
- 10km buffer -> 46%


---
# Population closed to forest by different datasets
```{r echo=FALSE}
kableExtra::kable(df_pop_all)

```

